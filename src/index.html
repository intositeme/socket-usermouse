<!doctype html>
<html>
  <head>
    <title>Socket.IO - Arduiono</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html { width:100%; height: 100% }
      body { width:100%; height: 100% }
      .holder { width: 400% ; height: 100% }
      .boxy { width: 25% ; height: 100%; float: left; }
      .box1 { background-color: blue; }
      .box2 { background-color: green; }
      .box3 { background-color: red; }
      .box4 { background-color: black; }
    </style>
  </head>
  <body>
    <div class="holder">
      <div class="boxy box1"></div>
      <div class="boxy box2"></div>
      <div class="boxy box3"></div>
      <div class="boxy box4"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var socket = io();
      var goX = 0;
      var tW = $(document).width();
      var win = $(window);
      socket.on('event', function(msg){
        // if (msg == "left") {
        //   $(window).scrollLeft(  $(window).scrollLeft( ) + 50 );
        // } else {
        //   $(window).scrollLeft(  $(window).scrollLeft( ) - 50 );
        // }
        goX = tW * Math.min(msg, 70)/60;
        
      });
      
      win[0].requestAnimationFrame(update);

      function update () {
        var tX = $(window).scrollLeft() + (goX - $(window).scrollLeft() ) /6;
        // $(window).scrollLeft(  tX  );
        win.scrollLeft(  tX  );
        win[0].requestAnimationFrame(update);
        // console.log('update', tX); 
      }
    </script>
  </body>
</html>